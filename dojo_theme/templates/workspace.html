{% extends "base.html" %}


{% block stylesheets %}
{{ super() }}

<style>
    html, body {
        margin: 0;
        height: 100%;
        min-height: 100%;
        background-color: #111;
    }

    body {
        display: flex;
        flex-direction: column;
    }

    nav, footer {
        flex: none;
    }

    main {
        flex: auto;
        margin: 0;
        display: flex;
        flex-direction: column;
    }

    #workspace-content {
        flex: 1;
        width: 100%;
        border: none;
    }

    #workspace-controls {
        width: 100%;
        height: 2.5em;
        margin: 5px 0;
        padding: 0 5px;
        display: flex;
        flex-wrap: nowrap;
    }

    .workspace-control {
        height: 100%;
        margin: 0 2px;
        border: 0;
        border-radius: 1em;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
    }

    button.workspace-control  {
        width: 2.5em;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .workspace-control input {
        height: 100% !important;
        box-sizing: border-box;
        padding: 1em;
        color: #fff;
        background-color: #111;
        border: 0;
        border-color: #000 !important;
        border-radius: 1em;
        box-shadow: none !important;
    }

    .workspace-control input::placeholder {
        color: #6c757d;
        opacity: 1;
    }

    .workspace-control input:focus:not(.submit-correct):not(.submit-incorrect):not(.submit-warn),
    .workspace-control input:hover:not(.submit-correct):not(.submit-incorrect):not(.submit-warn) {
        outline: 2px solid #6c757d !important;
    }

    .submit-correct {
        outline: 2px solid #008000 !important;
    }

    .submit-incorrect {
        outline: 2px solid #800000 !important;
    }

    .submit-warn {
        outline: 2px solid #d0c000 !important;
    }

    .workspace-control-spacer {
        flex: 1;
    }
</style>
{% endblock %}


{% block content %}
<iframe src="" id="workspace-content"></iframe>

<div id="workspace-controls">
    <div title="Change workspace">
        <select id="workspace-select" class="workspace-control btn btn-outline-secondary workspace-selector">
            {% for service in workspace_services %}
            <option value="{{ service | lower }}">{{ service }}</option>
            {% endfor %}
        </select>
    </div>
    <div title="Submit flag" class="workspace-control">
        <input id="flag-input" class="" type="text" placeholder="Flag">
        <input type="hidden" id="current-challenge-id" value="{{ challenge.challenge_id }}">
    </div>
    <div class="workspace-control-spacer"></div>
    {% if challenge.allow_privileged %}
    <button id="start-privileged" title="Restart privileged" class="workspace-control btn btn-md btn-outline-secondary btn-challenge-start">
        <i class="fas fa-unlock"></i>
    </button>
    {% endif %}
    <button id="start-unprivileged" title="Restart unprivileged" class="workspace-control btn btn-md btn-outline-secondary btn-challenge-start">
        <i class="fas fa-lock"></i>
    </button>
    <button id="fullscreen" title="Toggle fullscreen" class="workspace-control btn btn-md btn-outline-secondary">
        <i class="fas fa-expand"></i>
    </button>
</div>

<div id="alert"></div>
{% endblock %}


{% block scripts %}
<script defer src="{{ url_for('views.themes', path='js/dojo/workspace.js') }}"></script>
{% endblock %}